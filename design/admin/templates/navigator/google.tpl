{* DO NOT EDIT THIS FILE! Use an override template instead. *}
{default page_uri_suffix=false()
         left_max=7
         right_max=6
         alphabetical=enabled
         offset_filter=false()}
{default name=ViewParameter
         page_uri_suffix=false()
         left_max=$left_max
         right_max=$right_max}

{let page_count=int( ceil( div( $item_count,$item_limit ) ) )
      current_page=min($:page_count,
                       int( ceil( div( first_set( $view_parameters.offset, 0),
                                       $item_limit ) ) ) )
      item_previous=sub( mul( $:current_page, $item_limit ),
                         $item_limit )
      item_next=sum( mul( $:current_page, $item_limit ),
                     $item_limit )

      objectname_filter=false()

      left_length=min($ViewParameter:current_page,$:left_max)
      right_length=max(min(sub($ViewParameter:page_count,$ViewParameter:current_page,1),$:right_max),0)
      view_parameter_text=""
      offset_text=eq( ezini( 'ControlSettings', 'AllowUserVariables', 'template.ini' ), 'true' )|choose( '/offset/', '/(offset)/' )
      filter_text=''}

{if is_set( $view_parameters.filter )}
{set objectname_filter=$view_parameters.filter}
{/if}

{if ne($:objectname_filter,false() )}
   {set $filter_text=concat( '/(filter)/', $:objectname_filter )}
{/if}

{* Create view parameter text with the exception of offset *}
{section loop=$view_parameters}
 {section-exclude match=eq($:key,offset)}
 {section-exclude match=eq($:key,filter)}
 {section-exclude match=$:item|not}
 {set view_parameter_text=concat($:view_parameter_text,'/(',$:key,')/',$:item)}
{/section}

{section show=$:page_count|gt(1)}

<div class="pagenavigator">
<p>

     {switch match=$:item_previous|lt(0) }
       {case match=0}
      <span class="previous"><a href={concat($page_uri,$:item_previous|gt(0)|choose('',concat($:offset_text,$:item_previous, $:filter_text)),$:view_parameter_text,$page_uri_suffix)|ezurl}><span class="text">&laquo;&nbsp;{"Previous"|i18n("design/admin/navigator")}</span></a></span>
       {/case}
       {case}
      <span class="previous"><span class="text disabled">&laquo;&nbsp;{"Previous"|i18n("design/admin/navigator")}</span></span>
       {/case}
     {/switch}

    {switch match=$:item_next|lt($item_count)}
      {case match=1}
        <span class="next"><a href={concat($page_uri,$:offset_text,$:item_next,$:filter_text,$:view_parameter_text,$page_uri_suffix)|ezurl}><span class="text">{"Next"|i18n("design/admin/navigator")}&nbsp;&raquo;</span></a></span>
      {/case}
      {case}
        <span class="next"><span class="text disabled">{"Next"|i18n("design/admin/navigator")}&nbsp;&raquo;</span></span>
      {/case}
    {/switch}

<span class="pages">
{section show=$:current_page|gt($:left_max)}
<a href={concat($page_uri,$:view_parameter_text,$page_uri_suffix)|ezurl}>1</a>
{section show=sub($:current_page,$:left_length)|gt(1)}
...
{/section}
{/section}

    {section loop=$:left_length}
        {let page_offset=sum(sub($ViewParameter:current_page,$ViewParameter:left_length),$:index)}
          <span class="other"><a href={concat($page_uri,$:page_offset|gt(0)|choose('',concat($:offset_text,mul($:page_offset,$item_limit))),$:filter_text, $ViewParameter:view_parameter_text,$page_uri_suffix)|ezurl}>{$:page_offset|inc}</a></span>
        {/let}
    {/section}

        <span class="current">{$:current_page|inc}</span>
					
    {section loop=$:right_length}
        {let page_offset=sum($ViewParameter:current_page,1,$:index)}
          <span class="other"><a href={concat($page_uri,$:page_offset|gt(0)|choose('',concat($:offset_text,mul($:page_offset,$item_limit))),$:filter_text, $ViewParameter:view_parameter_text,$page_uri_suffix)|ezurl}>{$:page_offset|inc}</a></span>
        {/let}
    {/section}

{section show=$:page_count|gt(sum($:current_page,$:right_max,1))}
{section show=sum($:current_page,$:right_max,2)|lt($:page_count)}
<span class="other">...</span>
{/section}
<span class="other"><a href={concat($page_uri,$:page_count|dec|gt(0)|choose('',concat($:offset_text,mul($:page_count|dec,$item_limit))),$:filter_text, $:view_parameter_text,$page_uri_suffix)|ezurl}>{$:page_count}</a></span>
{/section}

</span>

</p>
<div class="break"></div>
</div>

{/section}

{if and( eq( ezini( 'GoogleSettings', 'Alphabetical', 'content.ini' ), 'enabled' ), eq( $alphabetical, 'enabled' ))}

   {if and( $:objectname_filter|eq( false() ), $:page_count|eq( 0 ) )}
   {* DO NOTHING *}
   {else}
       <div class="pagenavigator">
       <p>
       {let $c=0}
        <span class="pages">
            {if $:objectname_filter|eq( false() )}
                 <span class="current">off</span>
	    {else}
                 <span class="other"><a href={concat( $page_uri, $page_uri_suffix )|ezurl()}>off</a></span>
	    {/if}

	    {if $:objectname_filter|eq('*')}
                 <span class="current">*</span>
	    {else}
		 {*<span class="other"><a href="{concat( $page_uri, $page_uri_suffix )|ezurl(no)|concat( '/(filter)/', '*' )}">*</a></span>*}
	         <span class="other"><a href={concat( $page_uri, '/(filter)/', '*', $:view_parameter_text, $page_uri_suffix )|ezurl}>*</a></span>		
	    {/if}

            {foreach alphabet() as $letter}
                 {if $letter|eq( $:objectname_filter )}
                      <span class="current">{$letter}</span>
                 {else}
                      {*<span class="other"><a href="{concat( $page_uri, $page_uri_suffix )|ezurl(no)|concat( '/(filter)/', $letter )}">{$letter}</a></span>*}
                      <span class="other"><a href={concat( $page_uri, '/(filter)/', $letter, $:view_parameter_text, $page_uri_suffix )|ezurl}>{$letter}</a></span>
                 {/if}
	         {set $c=inc($:c)}
	         {if $:c|gt(25)}
	            {set $c=0}
	            <br>
                 {/if}		
            {/foreach}
    </span>
    {/let}
    </p>
    <div class="break"></div>
    </div>
  {/if}
{/if}

{/let}
{/default}
{/default}


