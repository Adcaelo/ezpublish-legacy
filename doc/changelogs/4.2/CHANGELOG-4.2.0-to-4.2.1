Changes from 4.2.0 to 4.2.1

*Kernel:
- Implemented enhancement #15630: Avoid fatal error when fetching nodes from inconsistent databases
  (Merged from trunk (4.3.0alpha1) rev. 24221)
- Implemented enhancement #15812: Improve debug output of template foreach function
  (Merged from trunk (4.3.0alpha1) rev. 24341)
- Implemented enhancement #15641: BCC - sending problem with the notification mail
  (Merged from trunk (4.3.0alpha1) rev. 24346)
- Implemented enhancement #15441: eZDBSchemaInterface subclasses do not allow to dump/rebuild a proper schema: table columns are always sorted
  (Merged from trunk (4.3.0beta1) rev. 24974)
- Implemented enhancement #15793: eZDFS: Image files and aliases are not removed when a objectversion is deleted
  (Merged from trunk (4.3.0beta1) rev. 25129 + 25130)
- Implemented enhancement #014781: translation cache isn't deleted at "Clear all caches"
  (Merged from master (4.4alpha4) commit 8322321)
- Implemented enhancement #016949: Workflow: Content objects in illegal state if the parent node is removed before publishing the C.O.
  (Merged from master (4.4.0beta1) commit 19fe839)
- Implemented enhancement #016993: transactions in content/trash must be reduced
  (Merged from master (4.4alpha5) commit e9888af)
- Implemented enhancement #017087: Mixing of html and text within a single email for a digest mail
  (Merged from master (4.4.0beta1) commit f23759a)

*Design:

*eZTemplate:

*eZLocale:

*Package system:

*Scripts:
- Fixed bug #15522: Upgrade script for node assignments which are left behind
  (Merged from trunk (4.3.0beta2) rev.25109)

*Translations:

*Bugfixes:
- Fixed bug #016828: content/view/full => if node_id is no numeric or < 2 ez should return an error_code
  (Merged from trunk (4.4.0alpha2) rev. 25285)
- Fixed bug #016814: Rendering problems in ezxmltext datatype
  (Merged from trunk (4.4.0alpha3) rev. 25307)
- Fixed bug #016776: PHP errors and warnings prevents HTTP status 500 to be used by index_cluster.php
- Fixed bug #15467: ezenum datatype always resets the multiple choice settings when the class is edited
  (Merged from trunk (4.3.0alpha1) rev. 24077)
- Fixed bug #14939: odd workflow behaviour when redirects
  (Merged from trunk (4.3.0alpha1) rev. 24082)
- Fixed bug #14389: In ezldapuser.php, LDAPLoginAttribute and LDAPGroupNameAttribute ini variables with upper case caracters unread
  (Merged from trunk (4.3.0alpha1) rev. 24095)
- Fixed bug #15485: Deleted LDAP user nodes are not recreated
  (Merged from trunk (4.3.0alpha1) rev. 24099)
- Fixed bug #15530: Existing ezp users are not synced with ldap users
  (Merged from trunk (4.3.0alpha1) rev. 24135)
- Fixed bug #15532: Bug with eZHTTPTool::getDataByURL and output buffering
  (Merged from trunk (4.3.0alpha1) rev. 24153)
- Fixed bug #14456: ezselection.tpl produces invalid XHTML
  (Merged from trunk (4.3.0alpha1) rev. 24193)
- Fixed bug #15584: Correct serializeContentObjectAttribute in ezdatetimetype.php file
  (Merged from trunk (4.3.0alpha1) rev. 24199)
- Fixed bug #14927: simplify operator has a different behaviour depending on TemplateCompile settings
  (Merged from trunk (4.3.0alpha1) rev. 24128)
- Fixed bug #15231: Bad links in /content/versionview/
  (Merged from trunk (4.3.0alpha1) rev. 24209)
- Fixed bug #15601: Template error: No such attribute for array(2): additional_info
  (Merged from trunk (4.3.0alpha1) rev. 24213)
- Fixed bug #15624: LDAP login handler creates node assignments with wrong versions
  (Merged from trunk (4.3.0alpha1) rev. 24216)
- Fixed bug #15646: Ugly display when use the "create here" function
  (Merged from trunk (4.3.0alpha1) rev. 24244)
- Fixed bug #15678: Template compiler causes warning if node has not URI map
  (Merged from trunk (4.3.0alpha1) rev. 24247)
- Fixed bug #14616: classattributeidentifiers cache doesn't work (at all) with clustering + ezdb
  (Merged from trunk (4.3.0alpha1) rev. 24281)
- Fixed bug #15724: Custom remove action does not work in ezauthortype when using different base name
  (Merged from trunk (4.3.0alpha1) rev. 24295)
- Fixed bug #15725: ez2fs - user cache don't work
  (Merged from trunk (4.3.0alpha1) rev. 24300)
- Fixed bug #15639: remote_id of a node is changed at various places
  (Merged from trunk (4.3.0alpha1) rev. 24322)
- Fixed bug #14865: ezcache.php --purge disregards --expiry
  (Merged from trunk (4.3.0alpha1) rev. 24328)
- Fixed bug #15848: Syntax error in ezdebug.php
  (Merged from trunk (4.3.0alpha1) rev. 24335)
- Fixed bug #15740: Current imagemanager can`t execute image aliases that have different image handler`s filters.
  (Merged from trunk (4.3.0alpha1) rev. 24338)
- Fixed bug #15045: Fix for updateviewcount.php when using PathPrefix
  (Merged from trunk (4.3.0alpha1) rev. 24347)
- Fixed bug #15142: Related object counted even if it is moved to trash
  (Merged from trunk (4.3.0alpha1) rev. 24358)
- Fixed bug #15862: Register user can create duplicate entry
  (Merged from trunk (4.3.0alpha1) rev. 24378)
- Fixed bug #10687: Empty trash always fails on huge number of objects
  (Merged from trunk (4.3.0alpha1) rev. 24386)
- Fixed bug #14354: Strict standards: Declaration of eZOrderItem::remove() should be compatible with that of eZPersistentObject::remove()
  (Merged from trunk (4.3.0alpha1) rev. 24393)
- Fixed bug #14983: Files are still available when object is moved to trash
  (Merged from trunk (4.3.0alpha1) rev. 24414 and 24530)
- Fixed bug #14331: user/register - RegistrationEmail to Admin without EmailSender
  (Merged from trunk (4.3.0alpha1) rev. 24421)
- Fixed bug #15911: Still inconsistent use of the name "eZ Publish"
  (Merged from trunk (4.3.0alpha1) rev. 24446)
- Fixed bug #15733: ezcontentobjecttrashnode generate an sql error
  (Merged from trunk (4.3.0alpha1) rev. 24454)
- Fixed bug #15852: PHP Warning: str_repeat() warning with negative count parameter
  (Merged from trunk (4.3.0alpha1) rev. 24485)
- Fixed bug #15983: Allowing kernel override in config.php may cause a Fatal Error
  (Merged from trunk (4.3.0alpha1) rev. 24514)
- Fixed bug #15983: Allowing kernel override in config.php may cause a Fatal Error
  (Merged from trunk (4.3.0alpha1) rev. 24514)
- Fixed bug #12890: (Caching-)File problems when using sysmlinks in an installation
  (Merged from trunk (4.3.0alpha1) rev. 24548)
- Fixed bug #16002: Redirect after a login on SSO system (with an SSO Handler extension) is done with a meta redirect
  (Merged from trunk (4.3.0alpha1) rev. 24552)
- Fixed bug #16009: SSO handlers can lead to an infinite loop on user/logout
  (Merged from trunk (4.3.0alpha1) rev. 24558)
- Fixed bug #15970: Characters appended to node view urls are used in view cache tree structure
  (Merged from trunk (4.3.0alpha1) rev. 24764)
- Fixed bug #15418: France is listed twice in content.ini/[CountrySettings]/Countries
  (Merged from trunk (4.3.0alpha1) rev. 24770)
- Fixed bug #15070: Wrong error code if database is unavailable
  (Merged from trunk (4.3.0alpha1) rev. 24773)
- Fixed bug #16022: Bad parameter order for some imagemagick version
  (Merged from trunk (4.3.0alpha1) rev. 24801)
- Fixed bug #16105: Duplicate code in eZObjectRelationListType::validateObjectAttributeHTTPInput()
  (Merged from trunk (4.3.0alpha1) rev. 24803)
- Fixed bug #15979: ActiveExtensions Array order in site.ini changes on autoload generation
  (Merged from trunk (4.3.0alpha1) rev. 24720)
- Fixed bug #16011: invalid html using attribute(show)
  (Merged from trunk (4.3.0alpha1) rev. 24583)
- Fixed bug #15572: User registration validation error text is incomplete (when password length < minpasswordlength)
  (Merged from trunk (4.3.0alpha1) rev. 24555)
- Fixed bug #15991: When registering with an empty password, validation error displays "The passwords do not match."
  (Merged from trunk (4.3.0alpha1) rev. 24526)
- Fixed bug #16126: availableClassesJsArray wrongly defined as static causing create here menu on sub items to fail
  (Merged from trunk (4.3.0alpha1) rev. 24881)
- Fixed bug #11038: eZP might go into an infinite loop if MySQL closes it connections causing apache to segfault (now also fixed for mysqli)
  (Merged from trunk (4.3.0beta1) rev. 24902)
- Fixed bug #14615: Database errors in search engine logic using PHP 5.2.9
  (Merged from trunk (4.3.0beta1) rev. 24906)
- Fixed bug #15823: Running cache clearing procedure from upgrade 4.2.0 using root removes all linux system files
  (Merged from trunk (4.3.0beta1) rev. 24912)
- Fixed bug #015673: eZCollaborationItemHandler::handleCollaborationEvent() not oracle compatible
  (Merged from trunk (4.3.0beta1) rev. 24957)
- Fixed bug #15845: eZDir does not accept the root directory
- Fixed bug #16184: Regression in renderParagraph() after preserveWhiteSpace=false was removed with block tags
  (Merged from trunk (4.3.0beta1) rev. 24993)
- Fixed bug #15665: Site fails when activating TemplateCompile-setting
- Fixed bug #15842: Running eZScript scripts as root should be discouraged
  (Merged from trunk (4.3.0beta1) rev. 25024)
- Fixed bug #16078: Discarding translated draft removes original image
  (Merged from trunk (4.3.0beta2) rev. 25053)
- Fixed bug #15891: ezjscore - file names are cutted
  (Merged from trunk (4.3.0beta2) rev. 25081)
- Fixed bug #16048: eZTextFileUser login fail on mysql master/slave
  (Merged from trunk (4.3.0beta2) rev. 25093)
- Fixed bug #16272: Formatting of SQL queries causes warnings in Postgresql
- Fixed bug #16288: New mail transport classes can not be placed inside extension
  (Merged from trunk (4.3.0beta2) rev. 25098)
- Fixed bug #16322: eZTextFileUser makes user names with newline (with patch)
  (Merged from trunk (4.3.0beta2) rev. 25121)
- Fixed bug #15921: In-memory cache for eZContentClass is not cleared on expireCache()
  (Merged from trunk (4.3.0alpha1) rev. 24463)
- Fixed bug #16332: In-memory cache for eZContentClass when clearing class identifier cache
  (Merged from trunk (4.3.0beta2) rev. 25115)
- Fixed bug #16340: DB Deadlocks on ezcontentobject_tree when updating subnode (needs SQL IN() statement)
- Fixed bug #16400: Content of an ezmedia attribute is deleted from published version when a new draft is deleted
  (Merged from trunk (4.3.0rc1) rev. 25173)
- Fixed bug #16328: Wrong hash stored in database on hash update in ezUser.php
  (Merged from trunk (4.3.0rc1) rev. 25179)
- Fixed bug #14371: Workflow template repeat broken by security patch
  Missing patch part from last release
  (Merged from trunk (4.3.0) rev. 25199)
- Fixed bug #15727: Workflow status STATUS_FETCH_TEMPLATE_REPEAT disappeared
  (Merged from trunk (4.3.0) rev. 25202)
- Fixed bug #15417: ezpgenerateautoloads.php doesn't work well with config.php autoloading
  (Merged from trunk (4.4.0alpha1) rev. 25225)
- Fixed bug #16685: Fatal error with imageGD, php 5.3 and border image alias filter
  (Merged from trunk (4.4.0alpha1) rev. 25234)
- Fixed bug #016747: HTTP status 500 missing when transaction error occurs
  (Merged from trunk (4.4.0alpha1) rev. 25238)
- Fixed bug #016568: eZSearch::registerSearchObject() inserts duplicates when DelayedIndexing is set to 'classbased'
- Fixed bug #016527: warnings when using a login handler
  (Merged from trunk (4.4.0alpha2) rev. 25253)
- Fixed bug #014366: Duplicate remote_id in ezcontentobject_tree - for LDAP users
- Fixed bug #016230: Notice "undefined variable" when saving a draft with an objectrelationlist attribute
  (Merged from trunk (4.4.0alpha2) rev. 25258)
- Fixed bug #016713: eZImageType doesn't use real main node for image path
  (Merged from trunk (4.4.0alpha2) rev. 25276)
- Fixed bug #016542: System upgrade > check db consistency fails at comparing CHARACTER VARYING NULL fields
- Fixed bug #016838: iPhone and Content-Range support
  (Merged from trunk (4.4.0alpha2) rev. 25295)
- Fixed bug #016648: eZOperationMemento::createKey() if one of the process parameters is array, generated key is incorrect
  (Merged from trunk (4.4.0alpha3) rev. 25317)
- Fixed bug #014973: Update basket keys missing in operation_definition
  (Merged from trunk (4.4.0alpha3) rev. 25320)
- Fixed bug #016861: content/browse gives a fatal error when user isn't logged in
  (Merged from trunk (4.4.0alpha3) rev. 25323)
- Fixed bug #016865: incorrect operator used for totalPriceIncVat in ezorder.php
  (Merged from trunk (4.4.0alpha3) rev. 25326)
- Fixed bug #016872: unclear error message of copy subtree
  (Merged from trunk (4.4.0alpha3) rev. 25330)
- Fixed bug #016737: Oracle requires fields in ORDER BY to also be in the SELECT list or it will return an error
  (Merged from trunk (4.4.0alpha3) rev. 25342)
- Fixed wrong variable name in clusterbinarypurge.php, ref. issue #15793: eZDFS: Image files and aliases are not removed when a objectversion is deleted
  (Merged from trunk (4.4.0alpha4) rev. 25363)
- Fixed bug #16763: Notification cronjob eats all memory and crashes
  (Merged from master (4.4.0alpha4) commit 09b7fd4)
- Fixed bug #016003: forgotpasswordmail.tpl contains uneeded $site_url in a link
  (Merged from master (4.4alpha4) commit 0ac9caf)
- Fixed bug #014480: 4.0.0 (and ? uppers) : Hidden nodes are displayed in RSS exports
  (Merged from master (4.4alpha4) commit db3ef17)
- Fixed bug #016611: staticcache_cleanup.php cronjob can fatal error
  (Merged from master (4.4alpha5) commit fd594c7)
- Fixed bug #015769: Little mistake in eZUserType->validateObjectAttributeHTTPInput()
  (Merged from master (4.4alpha5) commit 8ce8b1f)
- Fixed bug #016064: bug in edit/ezoption.tpl template, please wash poll name
  (Merged from master (4.4alpha5) commit 7a8e080)
- Fixed bug #016824: Filenames with international characters are garbled in IE
  (Merged from master (4.4alpha5) commit c5af0e8)
- Fixed bug #016766: Class Group override condition isn't implemented for content/edit.tpl
  (Merged from master (4.4alpha5) commit 642ab88)
- Fixed bug #16393: XSS vulnerability in advanced search
  (Merged from master (4.4alpha5) commit 521cef0)
- Fixed bug #16397: SQL injection in search functionality
  (Merged from master (4.4alpha5) commit 4999dc8)
- Fixed bug #16398: SQL injection in advanced search functionality
  (Merged from master (4.4alpha5) commit a718e55)
- Fixed bug #16111: eZUser toString/fromString methods don't take into account if the user is enabled
  (Merged from master (4.4alpha5) commit f3fb350)
- Fixed bug #13428: eZLDAPUser implementation not safe
  (Merged from master (4.4alpha5) commit d4031fb)
- Fixed bug #15893: authenticateHash weakness
  (Merged from master (4.4alpha5) commit 88b1b78)
- Fixed bug #16439: LDAP injection vulnerability (patch)
  (Merged from master (4.4alpha5) commit c43f8db)
- Fixed bug #16738: LDAP login with method "GetGroupsTree" fails because of missing permissions of login script
  (Merged from master (4.4.0beta1) commit 98e4fdf)
- Fixed bug #16983: Login on private section with sso extension causes infinite redirection loop
  (Merged from master (4.4.0beta1) commit 867945c)
- Fixed bug #012192: Very bad performance in function eZInformationCollection::informationCollectionAttributes
  (Merged from master (4.4.0beta1) commit 8908681)
- Fixed bug #016569: After Content Read workflow trigger missing from Operation Defination
  (Merged from master (4.4.0beta1) commit 00fb357)
- Fixed bug #017040: Users groups not retrieved correctly
  (Merged from master (4.4.0beta1) commit 3fe997b)
- Fixed bug #014018: Redirect error on the "ContinueShoppingButton"
  (Merged from master (4.4.0beta1) commit 403423d)
- Fixed bug #017051: correctxmlalign.php does not work due to oracle incompatibility
  (Merged from master (4.4.0beta1) commit 11a58da)
- Fixed bug #017069: fixobjectremoteid.php fixnoderemoteid.php don't work on oracle
  (Merged from master (4.4.0beta1) commit f67d286)
- Fixed bug #015401: Wrong translation used when editing an object in a "Related objects" attribute
  (Merged from master (4.4.0beta1) commit b0c2c94)
- Fixed bug #017038: Other translations archived when editing related object
  (Merged from master (4.4.0beta1) commit 9b2338f)
- Fixed bug #016973: switchlanguage fetch not working as expected
  (Merged from master (4.4.0beta1) commit 46ab9b0)
- Fixed bug #017096: Incomplete cache file generation on cluster handlers
  (Merged from master (4.4.0beta1) commit a207529)
- Fixed bug #016637: eZContentObjectTreeNode::assignSectionToSubTree creates empty "WHERE IN" query
  (Merged from master (4.4.0beta1) commit a4be55e)
- Fixed bug #017097: ezcache.php: Some cache items can cause a complete cache purge
  (Merged from master (4.4.0beta1) commit 8d6e65b)
