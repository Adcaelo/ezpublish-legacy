Changes to BC and behaviour in version 4.1.0
============================================

Requirement changes
-------------------

- New eZ Components being used:
  - SystemInformation
  - Archive

Deprecated features
-------------------

- eZArchiveHandler
  This class and related sub-classes, such as eZTARArchiveHandler has been
  deprecated, they will be removed in eZ Publish 4.2. Archive from eZ Components
  is the intended replacement of this functionality.

- eZFile::getContents()
  The method getContents() of eZFile is deprecated now, use file_get_contents()
  instead.


Removed features
----------------

- eZSelectionType loose functions

  The file in which eZSelectionType is defined contained two loose functions,
  namely serializeContentObjectAttribute and unserializeContentObjectAttribute,
  which at the time of introducing them were supposed to be inside the class
  definition. These two functions have been removed.

- eZFilePassthroughHandler

  The deprecated class eZFilePassthroughHandler was removed. Use
  ezFilePassthroughHandler instead.

- eZXMLInputType

  The class eZXMLInputType, which was not any longer used by any part of the eZ
  Publish kernel, has been removed.

- eZURLTranslator

  The class eZURLTranslator, which was not any longer used by any part of the eZ
  Publish kernel, has been removed.

- eZDebugErrorHandler()
  The eZDebugErrorHandler() function that was declared in lib/ezutils/classes/ezdebug.php,
  has been removed. The new function eZDebug::recursionProtectErrorHandler() is
  used now as custom error handler.

- OpenFTS search plugin
  There existed some code to use OpenFTS as a search engine. This code was never completed
  though, and in an unusable state. Therefore it has been removed.


New constants in config.php
---------------------------

EZP_INI_FILEMTIME_CHECK
    This new setting controls whether eZINI should check if the settings have
    been updated in the *.ini-files*. If this check is disabled eZ Publish
    will always used the cached values, lowering the amount of stat-calls to
    the file system, and thus increasing performance.

EZP_AUTOLOAD_ALLOW_KERNEL_OVERRIDE
    This setting controls if eZ Publish's autoload system should allow, and
    load classes, which override kernel classes from extensions.

EZP_USE_BUNDLED_COMPONENTS
    If you are using a distribution of eZ Publish with which the necessary
    eZ Components are bundled (in lib/ezc), then you can use this setting to
    control if the bundled eZ Components should be used (true) or not (false).
    By default, when this setting is not present, the bundled eZ Components are
    used. If you're using the bundled eZ Components it's recommended to define
    EZP_USE_BUNDLED_COMPONENTS as a boolean true anyway, for optimal speed.

EZC_BASE_PATH
   If you are not using the bundled eZ Components, then for optimal speed it is
   recommended to set EZC_BASE_PATH to either ezc/Base/base.php or Base/src/base.php,
   depending on how you installed the eZ Components. By default, if this setting
   is not present, eZ Publish first tries to include ezc/Base/base.php. If that fails
   Base/src/base.php is included.

Changes to method signatures
----------------------------

- eZContentObject - fetchAttributesByIdentifier

  Parameter 3 is changed to be an array of locale codes, rather than a string
  with locale code.

- eZDBClusterFileHandler - getFileList

  The parameters have been completely changed. Earlier, getFileList() accepted
  2 booleans to define if files in the scopes 'binaryfile' and 'image' should
  be omitted. Now the method accepts an array of scopes of the files you want
  to be returned, and a boolean with which you can reverses the behavior so
  that all files in the scopes in the array are excluded.

Change of behaviour
-------------------

- eZContentClass - __clone

  A clone of an instance of eZContentClass will have a new remote ID, while
  before it had the same remote ID as its original.

- eZCharTransform does not any longer have a member variable $Mapper, because
  it caused wrong transformation rules to be used when calling
  eZCharTransform::transformByGroup multiple times with another value for its
  $group parameter.

- eZMail - validate

  This method now returns the value of preg_match directly, instead of using
  ereg. This means that return values of this method now is 1 for a valid
  address, and 0 for an invalid address.

Renamed constants
-----------------

===================================================== =======================================
Old constant                                          New constant
===================================================== =======================================
eZURLWildcard::EZURLWILDCARD_REGEXP_ARRAY_CALLBACK    eZURLWildcard::REGEXP_ARRAY_CALLBACK
eZURLWildcard::EZURLWILDCARD_TRANSLATE_CALLBACK       eZURLWildcard::TRANSLATE_CALLBACK
eZURLWildcard::EZURLWILDCARD_CACHED_TRANSLATE         eZURLWildcard::CACHED_TRANSLATE
eZURLWildcard::EZURLWILDCARD_WILDCARDS_PER_CACHE_FILE eZURLWildcard::WILDCARDS_PER_CACHE_FILE
eZURLWildcard::EZ_URLWILDCARD_TYPE_NONE               eZURLWildcard::TYPE_NONE
eZURLWildcard::EZ_URLWILDCARD_TYPE_FORWARD            eZURLWildcard::TYPE_FORWARD
eZURLWildcard::EZ_URLWILDCARD_TYPE_DIRECT             eZURLWildcard::TYPE_DIRECT
eZURLWildcard::EZ_URLWILDCARD_CACHE_SIGNATURE         eZURLWildcard::CACHE_SIGNATURE
===================================================== =======================================